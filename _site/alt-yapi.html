<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Oğuzcan Demircan</title>

    <meta name="author" content="Oğuzcan Demircan" />
    <meta name="owner" content="Oğuzcan Demircan" />
    <meta name="generator" content="Oğuzcan Demircan">
    
    
    <meta name="description" content="des">
    
    
    <meta name="keywords" content="key, words">
    

    <!--  Style CSS -->
    <link rel="stylesheet" href="/assets/css/style.css">

    <!-- FEED XML -->
    <link rel="alternate" type="application/rss+xml" title="Oğuzcan Demircan" href="/feed.xml" />

    <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

</head>
<body>
<main class="container-fluid h-100">
    
    <div class="row">
       <div id="sidebar" class="col-lg-3 hidden-md-down">
    <div class="row justify-content-center text-center mt-4">
        <div class="overlay"></div>
        <div class="col-12 profile">
            <img src="/assets/images/oguzcan-demircan.jpg" alt="Oğuzcan Demircan" >
        </div>
        <h4 class="mt-1 b-black">Oğuzcan Demircan</h4>
        <div class="col-12"></div>
        <h6 class="b-black">Software Developer</h6>
        <div class="col-12"></div>
        <div class="social-media b-black">
                <a target="_blank" href="https://github.com/oguzcandemircan"><i class="fab fa-github"></i></a>
                <a target="_blank" href="https://twitter.com/oguzcandemircan"><i class="fab fa-twitter"></i></a>
                <a target="_blank" href="https://medium.com/@oguzcandemircan"><i class="fab fa-medium"></i></a>
                <a target="_blank" href="https://www.linkedin.com/in/@oguzcandemircan"><i class="fab fa-linkedin"></i></a>
                <!-- <a target="_blank" href="https://gitlab.com/oguzcandemircan"><i class="fab fa-gitlab"></i></a> -->
        </div>
        <!-- <div class="col-12" style="background-color:#000;padding: 10px;position: absolute;top: 0px;">
            "Eğer kendi hayalinizi inşa etmezseniz, başkası sizi kendi hayalini inşa etmeniz için işe alacaktır"
        </div> -->
        <div class="col-12 copyright" style="background-color:#000;padding: 10px;position: absolute;bottom: 0px;">
            © 2018-2019 Oğuzcan Demircan All Rights Reserved
        </div>
    </div>
</div>
        <div id="content" class="col-lg-9 offset-lg-3" style="margin-top:20px;">
            <div class="row justify-content-center justify-content-lg-start">
                <div class="col-lg-6 col-10 left-space">
                    <div class="sub-nav">
    
        
            <a href="/">anasayfa</a>
        
    
        
            <a href="/posts">gönderiler</a>
        
    
        
            <a href="/tags">etiketler</a>
        
    
</div>

<!-- <br>
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">home</a></li>
        
        <li class="breadcrumb-item"><a href="#">software</a></li>
        
        <li class="breadcrumb-item"><a href="#">php</a></li>
        
        <li class="breadcrumb-item"><a href="#">laravel</a></li>
        
        <li class="breadcrumb-item active" aria-current="page">laravel stub generator</li>
    </ol>
</nav> -->
                    <article class="post-detail mt-4">
    <h2>Laravel Stub Generator</h2>
    <p>
        <img src="" alt="Laravel Stub Generator" />
        <h1 id="laravel-echo-serverhowto">Laravel Echo Server — How To</h1>

<p><a href="https://medium.com/@dennissmink?source=post_header_lockup"><img src="https://cdn-images-1.medium.com/fit/c/50/50/1*PGE6MrUIkLLqOM7S0ITr5w.jpeg" alt="Go to the profile of Dennis Smink" /></a></p>

<p><a href="https://medium.com/@dennissmink">Dennis Smink</a>BlockedUnblockFollowFollowing</p>

<p>Jun 6, 2018</p>

<p>In my opinion, real-time apps are the future. Socket servers usually were not that easy to setup, but Laravel Echo Server changes this.</p>

<p>In this article, I’ll briefly show you how to quickly whip up a working socket server and broadcast events over the server. (<a href="https://github.com/tlaverdure/laravel-echo-server">https://github.com/tlaverdure/laravel-echo-server</a>, supported by Laravel’s docs: <a href="https://laravel.com/docs/5.6/broadcasting#driver-prerequisites">https://laravel.com/docs/5.6/broadcasting#driver-prerequisites</a>)</p>

<p>This is completely free, you only have to run the socket server yourself. You can also use pusher which is also integrated with Laravel by default, only downside is that this comes with limits, whenever you reach a limit you will have to pay. I like to be independent and host these things myself if I get the chance.</p>

<h4 id="requirements"><strong>Requirements:</strong></h4>

<ul>
  <li>Laravel framework (Version 5.6 was used in this tutorial)</li>
  <li>Redis server</li>
  <li>Basic Laravel knowledge</li>
</ul>

<h4 id="installing-laravel-echo-server"><strong>Installing laravel-echo-server</strong></h4>

<p>To begin, we have to install the laravel-echo-server package globally, you can do so by executing this in your terminal.</p>

<p>$ npm install -g laravel-echo-server</p>

<p>When this is done, open up your Laravel application, or install a new one by doing:</p>

<p>$ composer create-project –prefer-dist laravel/laravel echo-test</p>

<p>Also install the predis package to we can use this in our application:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>composer require predis/predis
</code></pre></div></div>

<p>Now when thats done, we have to initialize the socket server, make sure you are in your projects <strong>root</strong> directory:</p>

<p>$ laravel-echo-server init</p>

<p>This command will start asking you some questions about the configuration of your socket server, fill these in according to your installation:</p>

<p><img src="https://cdn-images-1.medium.com/freeze/max/30/1*HLAGzaMi4Iux9LEmQW4Y0g.png?q=20" alt="" /></p>

<p><img src="https://cdn-images-1.medium.com/max/800/1*HLAGzaMi4Iux9LEmQW4Y0g.png" alt="" /></p>

<p><img src="https://cdn-images-1.medium.com/max/800/1*HLAGzaMi4Iux9LEmQW4Y0g.png" alt="" /></p>

<p><strong>Remember whenever you use this in production, make sure to put your development mode off.</strong></p>

<p>We’ll give the server a first run to see if everything is OK:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>laravel-echo-server start
</code></pre></div></div>

<p>Output should be something like this:</p>

<p><img src="https://cdn-images-1.medium.com/freeze/max/30/1*WpI2HCk6_XYwNZ7AH-BIlQ.png?q=20" alt="" /></p>

<p><img src="https://cdn-images-1.medium.com/max/800/1*WpI2HCk6_XYwNZ7AH-BIlQ.png" alt="" /></p>

<p><img src="https://cdn-images-1.medium.com/max/800/1*WpI2HCk6_XYwNZ7AH-BIlQ.png" alt="" /></p>

<h4 id="configuring-laravel-to-work-with-laravel-echoserver"><strong>Configuring Laravel to work with Laravel Echo Server</strong></h4>

<p>Open up your <code class="highlighter-rouge">config/app.php</code> file and uncomment the <code class="highlighter-rouge">BroadcastServiceProvider</code> in the providers array:</p>

<p>App\Providers\BroadcastServiceProvider::class,</p>

<p>This provider will enable the Broadcasting routes (which you may have seen inside <code class="highlighter-rouge">routes/channels.php</code> file)</p>

<p>Open up the <code class="highlighter-rouge">.env</code> file and change <code class="highlighter-rouge">BROADCAST_DRIVER</code> to your selected driver which you defined in the laravel-echo-server initialization (redis or log). In this tutorial we will be using the redis driver.<br />
Also change the <code class="highlighter-rouge">QUEUE_DRIVER</code> to any queue driver you like, in this case you can easily change this to redis because you already have this up and running.</p>

<p>Now we have to install the socket.io client and the laravel-echo package, you can install this by doing:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install --save socket.io-client$ 
</code></pre></div></div>

<p>(It might be necessary to run <code class="highlighter-rouge">npm install</code> before running this to install Laravel mix and dependencies)</p>

<p>Next open up the <code class="highlighter-rouge">resources/assets/js/bootstrap.js</code> file, or the JS file where you hold all the base JS code. (In case for Laravel 5.7 or higher, the file can be found here: <code class="highlighter-rouge">resources/js/bootstrap.js</code> )</p>

<p>Now we’re gonna add the code that holds the base code for the Echo server:</p>

<p>import Echo from ‘laravel-echo’</p>

<p><strong><em>window</em></strong>.io = require(‘socket.io-client’);</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>window.Echo = new Echo({    broadcaster: 'socket.io',    host: window.location.hostname + ':6001'}); 
</code></pre></div></div>

<p>We are now ready to start listening on channels! I’ll explain open channels in this tutorial, lets get started with listening on our first channel:</p>

<p><strong><em>window</em></strong>.Echo.channel(‘test-event’)<br />
    .listen(‘ExampleEvent’, (e) =&gt; {<br />
        <strong><em>console</em></strong>.log(e);<br />
    });</p>

<p>We telling the JS code here; subscribe on the channel named ‘test-event’, and listen for ‘ExampleEvent’ (this is the class name from the event, you can customize this if you want).</p>

<p>Lets create this event class:</p>

<p>$ php artisan make:event ExampleEvent</p>

<p>This will create a new event class inside <code class="highlighter-rouge">App/Events</code> , which is named <code class="highlighter-rouge">ExampleEvent.php</code></p>

<p>Lets tweak this event class so it will work with our socket server, firstly make sure your the event class implements the <code class="highlighter-rouge">ShouldBroadcast</code> interface, like this;</p>

<p>class ExampleEvent implements ShouldBroadcast</p>

<p>Now scroll down and change the <code class="highlighter-rouge">broadcastOn</code> function so we broadcast on the correct channel:</p>

<p>public function broadcastOn()<br />
{<br />
    return new Channel(‘test-event’);<br />
}</p>

<p>Lets add another function below this so we can have some example data:</p>

<p>public function broadcastWith()<br />
{<br />
    return [<br />
        ‘data’ =&gt; ‘key’<br />
    ];<br />
}</p>

<p>This function is called when the event is called, its the data that it will return to your socket server.</p>

<p>Now lets try this! Open up your <code class="highlighter-rouge">routes/web.php</code> file and add a test route:</p>

<p>Route::get(‘test-broadcast’, function(){<br />
    broadcast(new \App\Events\ExampleEvent);<br />
});</p>

<p>(There are multiple ways to broadcast the <code class="highlighter-rouge">ExampleEvent</code> class, in this case I am using the <code class="highlighter-rouge">broadcast()</code> helper that Laravel provides, in my opinion this is the cleanest way)</p>

<p>Start up a queue listener:</p>

<p>$ php artisan queue:listen –tries=1</p>

<p>Open up 1 tab with the JS file included (this could just be the Laravel ‘welcome’ scaffold page), so you are subscribed to the socket server.</p>

<p>Then open another tab and visit the <code class="highlighter-rouge">/test-broadcast</code> route, this will return a white page, but it will broadcast your <code class="highlighter-rouge">ExampleEvent</code> class to your socket server. You can see this in your terminal (in the other tab with the welcome page):</p>

<p><img src="https://cdn-images-1.medium.com/max/800/1*tFiwX0FJUFgxNDBugQPJ8Q.png" alt="" /></p>

<p>As you can see, the data came in our client this way. You can pass any data to the <code class="highlighter-rouge">ExampleEvent</code> class so you can broadcast this, this can be news updates, page updates, total viewing and much more.</p>

<p>Because we have development mode in the laravel-echo-server configuration, you can see all the basic information that is happening on the server:</p>

<p><img src="https://cdn-images-1.medium.com/max/800/1*XS74jJNxrzrUuaALJDCbeA.png" alt="" /></p>

<p>You now have a basic setup running for a socket server! But this is not all, there’s way more that you can do, like Private channels with authentication for a single user. (Like when you want to broadcast a order update, or private message)</p>

<p>To do this I advise you to go to the Laravel docs and fiddle around with this. There is really a lot you can do with this subject that makes your application really awesome. You can find the documentation over here:</p>

<p><a href="https://laravel.com/docs/5.6/broadcasting" title="https://laravel.com/docs/5.6/broadcasting"><strong>Broadcasting - Laravel - The PHP Framework For Web Artisans</strong><br />
_Laravel - The PHP framework for web artisans._laravel.com</a><a href="https://laravel.com/docs/5.6/broadcasting"></a></p>

<h4 id="extra-running-in-production"><strong>Extra: Running in production</strong></h4>

<p>Like I said before, make sure you disable development mode inside the <code class="highlighter-rouge">laravel-echo-server.json</code> configuration file. You also might want to gitignore this file and init it on the server itself, because the host might differ from what you have locally.</p>

<p>You also need something to keep the socket server running on your production server, you could use Supervisor to do this, but what I usually do is use <em>PM2</em> for this kind of things, it makes managing these servers really easy and fast. (<a href="http://pm2.keymetrics.io/">http://pm2.keymetrics.io/</a>)</p>

<p>I’ll share my really basic socket.sh script here to run with <em>PM2:</em></p>

<p>**#!/usr/bin/env bash</p>

<p>**<em>laravel-echo-server</em> start</p>

<p>When you have installed <em>PM2</em>, you can just do <code class="highlighter-rouge">pm2 start socket.sh</code> , this will start the script and thus the socket server.</p>

<p>I hope this script was of any use for you, I have just written out the basics and I might continue in another article about the authenticated broadcast routes, and different broadcasting channels.</p>

<p>Thank you for reading!</p>

<p><em>Note: please bare in mind that I am a Dutch developer, English is not my native language so this article could contain any grammatical errors.</em></p>

    </p>
    <div class="tags">
        <ul>
            
            <li><a href="http://localhost:4000/tags#php" title="php"><span>php</span></a></li>
            
            <li><a href="http://localhost:4000/tags#laravel" title="laravel"><span>laravel</span></a></li>
            
            <li><a href="http://localhost:4000/tags#software" title="software"><span>software</span></a></li>
            
        </ul>
    </div>
    <div class="date">
        <span>18 March 2018</span>
    </div>
    <hr>
    <div class="disqus-comments"> <div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = "http://localhost:4000/alt-yapi";  
this.page.identifier = "Laravel Stub Generator";
};
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://oguzcandemircan.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div>
</article> 
                    <div class="mt-4">
                        © 2018-2019 Oğuzcan Demircan All Rights Reserved 
                    </div>
                </div>
                <!-- <div class="col-lg-5" style="position:fixed; right: 0px;">
                    <div class="col-lg-6 float-right">
                        
                        <article class="post">
                            <a href="yeni-nesil-gelistirme-ortami">
                                <h2>Yeni nesil geliştirme ortamı Docker ! 3 / 1</h2>
                                <img src="/assets/posts/1/docker.png" alt="Yeni nesil geliştirme ortamı Docker ! 3 / 1" />
                                Bu makale de Docker nedir ? Docker biz geliştiriciler için ne ifade ediyor ? Neden Docker kullanalım ? Dockerı nasıl kullanırız vb. gibi sorulara cevap arıyoruz.
                            </a>
                            <br>
                            <br>
                            <span>24 March 2018</span>
                        </article>
                        
                        <article class="post">
                            <a href="alt-yapi">
                                <h2>Laravel Stub Generator</h2>
                                <img src="" alt="Laravel Stub Generator" />
                                des
                            </a>
                            <br>
                            <br>
                            <span>18 March 2018</span>
                        </article>
                        
                    </div>
                </div> -->
            </div>
        </div>
    </div>
</main>
<script src="/assets/js/custom.js"></script>
</body>
</html>